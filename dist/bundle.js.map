{"version":3,"file":"bundle.js","sources":["../src/main.js"],"sourcesContent":["\nvar pyodide, editor, lastLineNo;\n \n    function disassembleCode() {\n        document.getElementById(\"disassemble-status\").innerHTML = \"Disassembling...\";\n        const code = editor.getValue();\n        document.getElementById(\"disassemble-rows\").innerText = '';\n        pyodide.runPython(`import dis; dis.dis('''${code}''')`);\n        const permalink = `${window.location.origin}/?code=${encodeURIComponent(code)}`.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n        document.getElementById(\"permalink-area\").style.display = \"block\";\n        document.getElementById(\"permalink-input\").value = permalink;\n    }\n\n    function handleStdOut(output) {\n        const matches = output.match(/\\s*(\\d+)?\\s+(\\d+)\\s+([A-Z_]+)\\s*(\\d+)?\\s*(\\(\\w+\\))?/);\n        if (!matches) {\n          return;\n        }\n        document.getElementById(\"disassemble-status\").innerHTML = \"\";\n        const lineNo = (matches[1] && parseInt(matches[1], 10)) || lastLineNo;\n        const offset = matches[2];\n        const opcode = matches[3];\n        const param = matches[4] || '';\n        const paramD = matches[5] || '';\n        var newRow = document.createElement('tr');\n        newRow.innerHTML = `<td>${lineNo}<td>${offset}<td><a href=\"https://docs.python.org/3/library/dis.html#opcode-${opcode}\" target=\"_blank\">${opcode}</a></td><td>${param}<td>${paramD}`;\n        document.getElementById(\"disassemble-rows\").appendChild(newRow);\n        newRow.addEventListener('mouseover', () => {\n          for (var i = 0; i <= lastLineNo; i++) editor.getDoc().removeLineClass(i, 'wrap', 'highlighted-line');\n          editor.getDoc().addLineClass((lineNo - 1), 'wrap', 'highlighted-line');\n        });\n        lastLineNo = lineNo;\n    }\n\n    async function main() {\n      const code = new URLSearchParams(window.location.search).get('code');\n      editor = new CodeMirror(document.getElementById('code-textarea'), {\n        lineNumbers: true,\n        value: code || '',\n        mode: 'python'\n      });\n\n      pyodide = await loadPyodide({\n        indexURL : \"https://cdn.jsdelivr.net/pyodide/v0.19.0/full/\",\n        stdout: handleStdOut,\n      });\n      document.getElementById(\"disassemble-status\").innerHTML = \"\";\n      document.getElementById(\"disassemble-button\").removeAttribute(\"disabled\");\n      document.getElementById(\"disassemble-button\").addEventListener(\"click\", disassembleCode);\n      code && disassembleCode();\n    };\n\nmain();\n"],"names":["pyodide","editor","lastLineNo","disassembleCode","document","getElementById","innerHTML","code","getValue","innerText","runPython","permalink","window","location","origin","encodeURIComponent","replace","style","display","value","handleStdOut","output","matches","match","lineNo","parseInt","offset","opcode","param","paramD","newRow","createElement","appendChild","addEventListener","i","getDoc","removeLineClass","addLineClass","async","URLSearchParams","search","get","CodeMirror","lineNumbers","mode","loadPyodide","indexURL","stdout","removeAttribute","main"],"mappings":"yBACA,IAAIA,EAASC,EAAQC,EAEjB,SAASC,IACLC,SAASC,eAAe,sBAAsBC,UAAY,mBAC1D,MAAMC,EAAON,EAAOO,WACpBJ,SAASC,eAAe,oBAAoBI,UAAY,GACxDT,EAAQU,UAAU,0BAA0BH,SAC5C,MAAMI,EAAY,GAAGC,OAAOC,SAASC,gBAAgBC,mBAAmBR,KAAQS,QAAQ,MAAO,OAAOA,QAAQ,MAAO,OACrHZ,SAASC,eAAe,kBAAkBY,MAAMC,QAAU,QAC1Dd,SAASC,eAAe,mBAAmBc,MAAQR,EAGvD,SAASS,EAAaC,GAClB,MAAMC,EAAUD,EAAOE,MAAM,uDAC7B,IAAKD,EACH,OAEFlB,SAASC,eAAe,sBAAsBC,UAAY,GAC1D,MAAMkB,EAAUF,EAAQ,IAAMG,SAASH,EAAQ,GAAI,KAAQpB,EACrDwB,EAASJ,EAAQ,GACjBK,EAASL,EAAQ,GACjBM,EAAQN,EAAQ,IAAM,GACtBO,EAASP,EAAQ,IAAM,GAC7B,IAAIQ,EAAS1B,SAAS2B,cAAc,MACpCD,EAAOxB,UAAY,OAAOkB,QAAaE,mEAAwEC,sBAA2BA,iBAAsBC,QAAYC,IAC5KzB,SAASC,eAAe,oBAAoB2B,YAAYF,GACxDA,EAAOG,iBAAiB,aAAa,KACnC,IAAK,IAAIC,EAAI,EAAGA,GAAKhC,EAAYgC,IAAKjC,EAAOkC,SAASC,gBAAgBF,EAAG,OAAQ,oBACjFjC,EAAOkC,SAASE,aAAcb,EAAS,EAAI,OAAQ,uBAErDtB,EAAasB,GAGjBc,iBACE,MAAM/B,EAAO,IAAIgC,gBAAgB3B,OAAOC,SAAS2B,QAAQC,IAAI,QAC7DxC,EAAS,IAAIyC,WAAWtC,SAASC,eAAe,iBAAkB,CAChEsC,aAAa,EACbxB,MAAOZ,GAAQ,GACfqC,KAAM,WAGR5C,QAAgB6C,YAAY,CAC1BC,SAAW,iDACXC,OAAQ3B,IAEVhB,SAASC,eAAe,sBAAsBC,UAAY,GAC1DF,SAASC,eAAe,sBAAsB2C,gBAAgB,YAC9D5C,SAASC,eAAe,sBAAsB4B,iBAAiB,QAAS9B,GACxEI,GAAQJ,IAGd8C"}